## 저널링 파일 시스템 (Journaling file system)
- OS는 파일시스템이 안전하게 저장되도록 하는 매커니즘을 구현하고 있다.
  - 만약, Write를 하는동안, 컴퓨터의 전원이 나간다면, 실제 데이터가 반영이 되지않은 상태로 남아있을 수 있습니다. 
  - 이 때 OS는 파일시스템에 Consistency를 보장하기위한 방법을 제공합니다.

### 파일이 write 되는 과정
- 파일은 Data Block 단위로 관리가 되고 크게 4가지 영역으로 구성이 되어있습니다. 
  - 이때, Block은 1개이상의 sector (ex. 512B)로 구성이 되어있습니다.
- Write되는 과정은 다음과 같습니다
  1. Inode 할당: 새 파일을 생성하면 파일 시스템은 빈 inode을 할당하여 해당 파일의 메타데이터를 저장합니다.
  2. 파일의 속성 작성: 새 파일의 속성(파일 크기, 권한 등)을 inode에 작성합니다.
  3. 데이터 블록 할당: 파일이 저장할 데이터의 크기에 따라 필요한 만큼의 데이터 블록을 할당합니다.
  4. 데이터 기록: 실제 데이터를 할당된 데이터 블록에 기록합니다.
  5. 디렉토리 업데이트: 파일을 포함하는 디렉토리 엔트리에 새 파일의 이름과 해당 파일의 inode 번호를 기록합니다.
  6. 비트맵 업데이트: 할당된 데이터 블록과 inode에 대한 할당 상태를 나타내는 비트맵을 업데이트합니다.
- 이 과정중에 문제가 일어난다면, 데이터의 일관성이 깨지게 됩니다. 
  - 이를 방지하기 위해서 Journaling이라는 기법이 생겨나게 되었습니다. (다른 방법도 존재합니다, FSCK등)

## Journaling 동작방식
- 저널링은 간단히 생각해서, 우리가 알고있는 DB와 같은 방식으로 동작을 합니다. 
- 저널링은 파일 시스템에서 Write를 하기전에 그 내용을 Log에 저장을 하는 방식을 말합니다. 
  - 만약, 전원이 끊겨도 Log에 저장을 하였기 때문에 Log의 내용을 보고 다시 되돌릴 수 있습니다. 
  - DB도 이와 같은 방식을 사용합니다. 
  - 이런 방식을 `Write-Ahead Logging` 방식이라고 합니다. 
  - 이를 통해 Transaction도 구성할 수 있습니다. 
